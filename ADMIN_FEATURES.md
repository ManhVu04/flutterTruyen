# TÃ­nh NÄƒng Quáº£n Trá»‹ (Admin Features)

## Tá»•ng Quan
Há»‡ thá»‘ng quáº£n trá»‹ cho phÃ©p admin chá»‰nh sá»­a toÃ n bá»™ chi tiáº¿t truyá»‡n vÃ  quáº£n lÃ½ chapters má»™t cÃ¡ch dá»… dÃ ng.

## CÃ¡c TÃ­nh NÄƒng ChÃ­nh

### 1. Chá»‰nh Sá»­a Chi Tiáº¿t Truyá»‡n
**MÃ n hÃ¬nh:** `AdminEditComicScreen`

Admin cÃ³ thá»ƒ chá»‰nh sá»­a má»i thÃ´ng tin cá»§a truyá»‡n:

#### ThÃ´ng tin cÆ¡ báº£n:
- âœï¸ **TiÃªu Ä‘á»**: TÃªn truyá»‡n
- ğŸ“ **MÃ´ táº£**: Giá»›i thiá»‡u chi tiáº¿t vá» truyá»‡n
- ğŸ–¼ï¸ **áº¢nh bÃ¬a**: URL áº£nh bÃ¬a (cÃ³ preview trá»±c tiáº¿p)

#### Thá»ƒ loáº¡i:
Chá»n nhiá»u thá»ƒ loáº¡i tá»« danh sÃ¡ch cÃ³ sáºµn:
- Cá»• Äáº¡i, Hiá»‡n Ä‘áº¡i
- Huyá»n Huyá»…n, Hai HÆ°á»›c
- HÃ n Quá»‘c, Háº­u Cung
- Há»‡ Thá»‘ng, Kinh Dá»‹
- Lá»‹ch Sá»­, Máº¡t Tháº¿
- NgÃ´n TÃ¬nh, Thanh xuÃ¢n - VÆ°á»n trÆ°á»ng
- TrÃ¹ng Sinh, Trong sinh
- Truyá»‡n SÃ¡ng TÃ¡c, Tu TiÃªn
- XuyÃªn KhÃ´ng, ÄÃ´ Thá»‹

#### Tráº¡ng thÃ¡i & Thá»‘ng kÃª:
- ğŸ“Š **Tráº¡ng thÃ¡i**: ongoing/completed/hiatus
- â­ **VIP Tier**: Má»©c VIP cáº§n thiáº¿t
- ğŸ‘ï¸ **LÆ°á»£t xem**: Sá»‘ lÆ°á»£t xem
- ğŸŒŸ **ÄÃ¡nh giÃ¡**: Rating (0.0 - 5.0)

**CÃ¡ch sá»­ dá»¥ng:**
1. VÃ o trang chi tiáº¿t truyá»‡n
2. Nháº¥n nÃºt **Edit** (biá»ƒu tÆ°á»£ng bÃºt) trÃªn thanh AppBar
3. Chá»‰nh sá»­a thÃ´ng tin
4. Nháº¥n **LÆ°u thay Ä‘á»•i**

---

### 2. Quáº£n LÃ½ Chapters
**MÃ n hÃ¬nh:** `AdminManageChaptersScreen`

Quáº£n lÃ½ toÃ n bá»™ chapters cá»§a truyá»‡n vá»›i giao diá»‡n trá»±c quan.

#### TÃ­nh nÄƒng:
- ğŸ“‹ **Danh sÃ¡ch chapters**: Hiá»ƒn thá»‹ táº¥t cáº£ chapters theo thá»© tá»±
- â• **ThÃªm chapter má»›i**: Táº¡o chapter vá»›i Ä‘áº§y Ä‘á»§ thÃ´ng tin
- âœï¸ **Chá»‰nh sá»­a chapter**: Sá»­a tiÃªu Ä‘á», thá»© tá»±, VIP level, trang
- ğŸ—‘ï¸ **XÃ³a chapter**: XÃ³a chapter (cÃ³ xÃ¡c nháº­n)

#### ThÃ´ng tin hiá»ƒn thá»‹:
- Thá»© tá»± chapter
- Badge FREE/VIP
- TiÃªu Ä‘á»
- NgÃ y phÃ¡t hÃ nh
- Sá»‘ lÆ°á»£ng trang

**CÃ¡ch sá»­ dá»¥ng:**
1. VÃ o trang chi tiáº¿t truyá»‡n
2. Chuyá»ƒn sang tab **Danh sÃ¡ch chÆ°Æ¡ng**
3. Nháº¥n nÃºt **Quáº£n lÃ½ Chapter**
4. Chá»n hÃ nh Ä‘á»™ng:
   - Nháº¥n **+** Ä‘á»ƒ thÃªm má»›i
   - Nháº¥n menu **â‹®** trÃªn má»—i chapter Ä‘á»ƒ chá»‰nh sá»­a/xÃ³a

---

### 3. ThÃªm/Chá»‰nh Sá»­a Chapter
**MÃ n hÃ¬nh:** `AdminEditChapterScreen`

MÃ n hÃ¬nh chi tiáº¿t Ä‘á»ƒ thÃªm hoáº·c chá»‰nh sá»­a chapter.

#### CÃ¡c trÆ°á»ng thÃ´ng tin:
- ğŸ“– **TiÃªu Ä‘á» chapter**: TÃªn chapter (báº¯t buá»™c)
- ğŸ”¢ **Thá»© tá»±**: Sá»‘ thá»© tá»± chapter (báº¯t buá»™c)
- â­ **VIP Required**: Má»©c VIP cáº§n thiáº¿t (0 = Free)
- ğŸ–¼ï¸ **Danh sÃ¡ch trang**: URL cÃ¡c trang (má»—i URL 1 dÃ²ng)

**VÃ­ dá»¥ danh sÃ¡ch trang:**
```
https://example.com/manga/page1.jpg
https://example.com/manga/page2.jpg
https://example.com/manga/page3.jpg
```

**CÃ¡ch sá»­ dá»¥ng:**
1. Tá»« mÃ n hÃ¬nh **Quáº£n lÃ½ Chapter**
2. Nháº¥n **ThÃªm Chapter** hoáº·c **Edit** trÃªn chapter
3. Äiá»n Ä‘áº§y Ä‘á»§ thÃ´ng tin
4. Nháº¥n **LÆ°u Chapter**

---

## Firestore Service Updates

ÄÃ£ thÃªm cÃ¡c phÆ°Æ¡ng thá»©c má»›i trong `FirestoreService`:

### Comic Management:
```dart
// Cáº­p nháº­t thÃ´ng tin truyá»‡n
Future<void> updateComic(Comic comic)

// XÃ³a truyá»‡n
Future<void> deleteComic(String comicId)
```

### Chapter Management:
```dart
// Cáº­p nháº­t chapter
Future<void> updateChapter({
  required String comicId,
  required String chapterId,
  required ChapterMeta chapter,
})

// XÃ³a chapter
Future<void> deleteChapter({
  required String comicId,
  required String chapterId,
})
```

---

## Báº£o Máº­t

- âœ… Chá»‰ user cÃ³ `isAdmin = true` má»›i tháº¥y vÃ  sá»­ dá»¥ng Ä‘Æ°á»£c cÃ¡c tÃ­nh nÄƒng admin
- âœ… NÃºt chá»‰nh sá»­a chá»‰ hiá»ƒn thá»‹ cho admin
- âœ… XÃ¡c nháº­n trÆ°á»›c khi xÃ³a Ä‘á»ƒ trÃ¡nh xÃ³a nháº§m

---

## Giao Diá»‡n

### MÃ n hÃ¬nh Chá»‰nh Sá»­a Truyá»‡n:
- ğŸ“± Layout phÃ¢n section rÃµ rÃ ng
- ğŸ¨ Form Ä‘áº¹p vá»›i icons vÃ  helper text
- ğŸ‘ï¸ Preview áº£nh bÃ¬a ngay trong form
- ğŸ·ï¸ Chá»n thá»ƒ loáº¡i báº±ng FilterChip
- ğŸ’¾ Floating Action Button Ä‘á»ƒ lÆ°u nhanh

### MÃ n hÃ¬nh Quáº£n LÃ½ Chapter:
- ğŸ“‹ ListView vá»›i Card cho má»—i chapter
- ğŸ¯ Badge mÃ u sáº¯c phÃ¢n biá»‡t FREE/VIP
- âš™ï¸ Menu context cho tá»«ng chapter
- â• FAB Ä‘á»ƒ thÃªm chapter má»›i

### MÃ n hÃ¬nh ThÃªm/Sá»­a Chapter:
- ğŸ“ Form validation Ä‘áº§y Ä‘á»§
- ğŸ”¢ Input type phÃ¹ há»£p cho tá»«ng trÆ°á»ng
- â„¹ï¸ Helper text hÆ°á»›ng dáº«n rÃµ rÃ ng
- âœ… NÃºt lÆ°u vá»›i loading state

---

## Workflow HoÃ n Chá»‰nh

### ThÃªm Truyá»‡n Má»›i (Quy trÃ¬nh cÅ©):
1. VÃ o mÃ n hÃ¬nh **Admin Upload**
2. Äiá»n thÃ´ng tin truyá»‡n + chapter Ä‘áº§u tiÃªn
3. Nháº¥n **LÆ°u truyá»‡n**

### Chá»‰nh Sá»­a Truyá»‡n (Quy trÃ¬nh má»›i):
1. TÃ¬m truyá»‡n trong danh sÃ¡ch
2. VÃ o trang **Chi tiáº¿t truyá»‡n**
3. Nháº¥n nÃºt **Edit** (icon bÃºt)
4. Chá»‰nh sá»­a báº¥t ká»³ thÃ´ng tin nÃ o
5. Nháº¥n **LÆ°u thay Ä‘á»•i**

### Quáº£n LÃ½ Chapters (Quy trÃ¬nh má»›i):
1. VÃ o trang **Chi tiáº¿t truyá»‡n**
2. Tab **Danh sÃ¡ch chÆ°Æ¡ng**
3. Nháº¥n **Quáº£n lÃ½ Chapter**
4. ThÃªm/Sá»­a/XÃ³a chapters tÃ¹y Ã½

---

## Screenshots Location

CÃ¡c mÃ n hÃ¬nh má»›i:
- `lib/screens/admin_edit_comic_screen.dart`
- `lib/screens/admin_manage_chapters_screen.dart`
- `lib/screens/admin_edit_chapter_screen.dart`

---

## Testing

Äá»ƒ test cÃ¡c tÃ­nh nÄƒng admin:

1. Äáº£m báº£o user cÃ³ `isAdmin = true` trong Firestore:
```json
{
  "users": {
    "userId": {
      "isAdmin": true,
      "displayName": "Admin",
      ...
    }
  }
}
```

2. ÄÄƒng nháº­p vá»›i tÃ i khoáº£n admin
3. VÃ o báº¥t ká»³ truyá»‡n nÃ o Ä‘á»ƒ tháº¥y cÃ¡c nÃºt admin
4. Test Ä‘áº§y Ä‘á»§ cÃ¡c chá»©c nÄƒng: thÃªm, sá»­a, xÃ³a

---

## Future Enhancements

CÃ³ thá»ƒ má»Ÿ rá»™ng thÃªm:
- ğŸ“Š Dashboard thá»‘ng kÃª cho admin
- ğŸ‘¥ Quáº£n lÃ½ users
- ğŸ’¬ Quáº£n lÃ½ comments/reviews
- ğŸ“ˆ Analytics chi tiáº¿t
- ğŸ”” Push notifications
- ğŸ–¼ï¸ Upload áº£nh trá»±c tiáº¿p thay vÃ¬ URL
- ğŸ“¤ Bulk upload chapters
